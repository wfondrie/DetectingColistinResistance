---
title: "Insert Paper Title Here"
author: "William E Fondrie"
output: github_document
---

```{r, include = FALSE, cache = FALSE}
knitr::opts_chunk$set(warning = FALSE, 
                      message = FALSE, 
                      results = "hide", 
                      cache = T)
```

Order of analysis (see the Rmd subdirectory for details):  
1. [modelTraining.Rmd]("Rmd/modelTraining.md")  
2. [simulateComplexSpectra.Rmd]("Rmd/simulateComplexSpectra.md")  
3. [mixtureAnalysis.Rmd]("Rmd/mixtureAnalysis.md")  
4. [evaluateModels.Rmd]("Rmd/evaluateModels.md")    
5. [makeMiscFigures.Rmd]("Rmd/makeMiscFigures.md")  
6. [illustrations.Rmd]("Rmd/illustrations.md")  
7. [makeTables.Rmd]("Rmd/makeTables.md")

## Code to run the analysis  
### Prepare workspace
```{r runAnalysis}
library(knitr)

# Make results and temp directories:
dir.create("../temp")
dir.create("../results")

# Set global parameters for analysis
mzTol <- 1.5 # m/z tolerance for feature extraction in Da
saveRDS(mzTol, "../temp/mzTol.rds")

instPckgs <- F # change to "T" to install all packages used in the analyses

if(instPckgs) {
    install.packages(c("tidyverse",
                       "stringr",
                       "forcats",
                       "MALDIquant",
                       "MALDIquantForeign",
                       "caret",
                       "PRROC",
                       "xgboost",
                       "tictoc",
                       "devtools",
                       "openxlsx"))
}
```

### Run Analysis Scripts  
```{r training}
knit("modelTraining.Rmd") # Trains xgboost models
```

```{r simulate}
knit("simulateComplexSpectra.Rmd") # simulates polymicrobial spectra
```

```{r twoMix}
knit("mixtureAnalysis.Rmd") # Imports spectra from experimental two-species mixtures
```

```{r evaluate}
knit("evaluateModels.Rmd") # Calculate performance metrics and makes figures
```

```{r figures}
knit("makeMiscFigures.Rmd") # Creates additional figures
```

```{r illustrations}
knit("illustrations.Rmd") # Creates additional figures for illustrations
```

```{r tables}
knit("writeTables.Rmd") # Creates supplementarly Tables
```

### Copy .md files to top directory  
```{r mvMarkdown}
file.copy("README.md", "..", overwrite=T)
```






